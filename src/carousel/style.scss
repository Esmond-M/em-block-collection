@import 'scss/variables';
@import 'scss/mixins';

// Optional container utility (safe if you already have one on the site)
.container { width: min(90%, $container-max); margin: 0 auto; }

// Skeleton pieces (used for editor preview too)
.is-skeleton { opacity: .75; }
.sk-line { display:block; height: .9rem; background: #e5e7eb; border-radius: 6px; margin: .35rem 0; }
.sk-line.short { width: 45%; }

// ===================
// Carousel
// ===================


.em-slick-carousel {
  max-width: var(--em-carousel-max-width, 1200px);
  margin: auto;
}


.is-editor .em-slick-slide {
  max-height: 494px;
}

.em-slick-slide {
  margin: 0 10px;
}

.carousel {
  position: relative;
  padding: 1rem 0 2rem;

  &__header {
    display:flex; align-items:center; justify-content:space-between;
    margin-bottom: .75rem;
  }

  &__title {
    text-align: center;
    width: 100%;    
    margin: 0;
    @include fluid-type(1.25rem, 1.75rem);
  }

  &__controls { display:flex; gap:.5rem; }

  &__btn {
    border: 1px solid $color-btn-border;
    background: $color-btn-bg;
    color: #fff;
    border-radius: $border-radius-btn;
    padding: .5rem .75rem;
    cursor: pointer;
    line-height: 1;
    font-size: 1.1rem;

    &:hover { border-color: $color-btn-primary; background: $color-btn-primary; }
    &:disabled { opacity: .5; cursor: not-allowed; }
  }

  &__viewport { overflow: hidden; }

  // Horizontal scroller with scroll-snap
  &__track {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 100%;
    gap: $carousel-gap;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    padding: 0 $carousel-gap;
    margin: 0;
    list-style: none;

    // Hide scrollbar, keep a11y
    scrollbar-width: none;
    &::-webkit-scrollbar { display: none; }

    // Slides per view
    @media (min-width: 700px) {
      grid-auto-columns: calc(50% - #{$carousel-gap} / 2);
    }
    @media (min-width: 1024px) {
      grid-auto-columns: calc(33.333% - #{$carousel-gap} * 2 / 3);
    }
  }

  &__slide { scroll-snap-align: start; scroll-snap-stop: always; }

  &__dots {
    display:flex; justify-content:center; gap:.5rem; margin-top:1rem;
    button {
      width:.6rem; height:.6rem; border-radius:50%;
      border:1px solid $color-btn-border; background: transparent; cursor:pointer;
      &.is-active { background:$color-btn-primary; border-color:$color-btn-primary; }
    }
  }
}

// Card (matches your masonry aesthetic)
.card {
  background: $carousel-bg; color: $carousel-text;
  border-radius: $carousel-radius; box-shadow: $carousel-shadow;
  overflow: hidden;
  display: grid; grid-template-rows: auto 1fr;

  &__media img { display:block; width:100%; height:auto; }

  &__body { padding: .9rem 1rem; }

  &__title {
    margin: .25rem 0 .4rem;
    font-size: 1rem; line-height: 1.3;
    a { color: inherit; text-decoration: none; &:hover { text-decoration: underline; } }
  }

  &__meta { color: $carousel-meta; font-size: .9rem; margin-bottom: .4rem; }

  &__excerpt { margin: 0 0 .75rem; }
}

// Button sizing utility used in cards/hero etc.
.btn {
  &--primary {
    background: $color-btn-primary;
    border-color: $color-btn-primary;
    color: #fff;
  }
  &--lg {
    font-size: 1.125rem;
    padding: 1rem 2rem;
  }
}